<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>HAUS TAINACH – VR (Quest 3)</title>

  <!-- A-Frame (WebXR) -->
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>

  <style>
    html,body{margin:0;height:100%;background:#000;font-family:system-ui,-apple-system,Segoe UI,Roboto;}
    .hud{
      position:fixed; left:10px; right:10px; top:10px; z-index:10;
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      pointer-events:auto;
    }
    .btn{
      appearance:none; border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.55); color:#fff;
      border-radius:14px; padding:12px 14px; font-size:14px;
      cursor:pointer;
      backdrop-filter: blur(10px);
    }
    .btn.primary{
      background:#e53935;
      border:1px solid rgba(255,255,255,.28);
      box-shadow: 0 10px 28px rgba(229,57,53,.35);
      font-weight:800;
    }
    .hint{
      position:fixed; left:10px; right:10px; bottom:10px; z-index:10;
      background:rgba(0,0,0,.45); color:rgba(255,255,255,.85);
      border:1px solid rgba(255,255,255,.12);
      border-radius:14px; padding:10px 12px; font-size:12px; line-height:1.35;
      backdrop-filter: blur(10px);
    }
  </style>
</head>

<body>

  <div class="hud">
    <button id="enterVR" class="btn primary" type="button">ENTER VR</button>
    <button id="back" class="btn" type="button">← zurück</button>
  </div>

  <div class="hint">
    Quest 3: Öffne diese Seite im Meta Quest Browser → ENTER VR. Wenn gefragt wird: Website‑Berechtigungen für „Immersive Web“ erlauben.
  </div>

  <a-scene
    xr-mode-ui="enabled: true"
    renderer="colorManagement: true"
    background="color: #000">

    <a-assets>
      <img id="pano" src="TAINACH_PANO.jpg" />
      <a-asset-item id="house" src="HAUS_TAINACH.glb"></a-asset-item>
    </a-assets>

    <!-- Panorama (equirectangular 2:1) -->
    <a-sky src="#pano" rotation="0 -90 0"></a-sky>

    <!-- Licht + Boden als Orientierung -->
    <a-entity light="type: hemisphere; intensity: 0.9; color: #ffffff; groundColor: #444"></a-entity>
    <a-entity light="type: directional; intensity: 0.8" position="6 10 6"></a-entity>
    <a-plane rotation="-90 0 0" width="400" height="400" color="#111"></a-plane>

    <!-- Haus (Yaw Start -90; X “aufgestellt” wie bei dir) -->
    <a-entity
      gltf-model="#house"
      rotation="90 -90 0"
      scale="12 12 12"
      position="0 0 -6">
    </a-entity>

    <!-- Kamera / Rig -->
    <a-entity id="rig" position="0 0 0">
      <a-entity camera look-controls position="0 1.6 0"></a-entity>
    </a-entity>

    <!-- Controller Ray (optional, später für Teleport/Buttons) -->
    <a-entity laser-controls="hand: left"></a-entity>
    <a-entity laser-controls="hand: right"></a-entity>
  </a-scene>

  <script>
    const scene = document.querySelector('a-scene');

    document.getElementById('enterVR').addEventListener('click', () => {
      // muss durch User-Geste ausgelöst werden (Button-Klick passt)
      if (scene && scene.enterVR) scene.enterVR();
    });

    document.getElementById('back').addEventListener('click', () => {
      location.href = 'index.html';
    });
  </script>
</body>
</html>
